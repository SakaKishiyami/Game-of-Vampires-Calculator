// Scarlet bond data and level progression

// Scarlet bond data with correct wardens and their attributes
export const scarletBondData = [
  { lover: "April/Axel", warden: "Diana", type: "All", vip: 12, main: 0, mainPercent: 0 },
  { lover: "Jen/Kal", warden: "Vance", type: "All", vip: 11, main: 0, mainPercent: 0 },
  { lover: "Viola/Valerian", warden: "Damian", type: "All", vip: 10, main: 0, mainPercent: 0 },
  { lover: "Nefertiti/Ramses", warden: "Cleo", type: "All", vip: 2, main: 0, mainPercent: 0 },
  { lover: "Frances/Francis", warden: "Charlemagne", type: "All", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Raven/Raven", warden: "Carmilla", type: "All", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Briony/Byron", warden: "Poe", type: "Dual", vip: 9, main: 0, mainPercent: 0 },
  { lover: "Ruby/Redd", warden: "William", type: "Dual", vip: 6, main: 0, mainPercent: 0 },
  { lover: "Estella/Nick", warden: "Aurelia", type: "Dual", vip: 8, main: 0, mainPercent: 0 },
  { lover: "Isabella/Izan", warden: "Tomas", type: "Dual", vip: 4, main: 0, mainPercent: 0 },
  { lover: "Mary/Martin", warden: "Victor", type: "Dual", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Inanna/Enki", warden: "Gilgamesh", type: "Dual", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Otchigon/Subutai", warden: "Temujin", type: "Dual", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Skylar/Scott", warden: "Josey", type: "Dual", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Bess/Bas", warden: "Mike", type: "Dual", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Roxana/Richmond", warden: "Erik", type: "Dual", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Aisha/Ajani", warden: "Candace", type: "Dual", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Antonia/Antonio", warden: "Vicente", type: "Dual", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Gabrielle/Gabriel", warden: "Julie", type: "Dual", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Mairi/Mitchell", warden: "Elsie", type: "Dual", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Aretha/Arthur", warden: "Robert", type: "Dual", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Agneyi", warden: "Rudra", type: "Single", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Culann", warden: "Finn", type: "Single", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Hela", warden: "Woden", type: "Single", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Regina/Ray", warden: "Frederick", type: "Single", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Ava/Ace", warden: "Alastair", type: "Single", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Alexis/Alexis", warden: "Harker", type: "Single", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Elaine/Gawain", warden: "Morien", type: "Single", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Suria/Chandra", warden: "Pavan", type: "Single", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Cordelia/Ward", warden: "Cornelius", type: "Single", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Hanna/Hugo", warden: "Piper", type: "Single", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Elizabeth/Ellis", warden: "John", type: "Single", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Michelle/Michael", warden: "Lorenzo", type: "Single", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Harriet/Harry", warden: "Nostradamus", type: "Single", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Johanna/Johan", warden: "Hans", type: "Single", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Lucy/Luca", warden: "Franco", type: "Single", vip: 0, main: 0, mainPercent: 0 },
  { lover: "Runa/Ragnor", warden: "Rollo", type: "Single", vip: 0, main: 0, mainPercent: 0 },
];

// Scarlet bond level progression data
export const scarletBondLevels = [
  { level: 1, single: 300, affinity: 0, dual: 200, dual_affinity: 0, all: 150, all_affinity: 0 },
  { level: 2, single: 630, affinity: 54, dual: 420, dual_affinity: 37, all: 315, all_affinity: 28 },
  { level: 3, single: 990, affinity: 118, dual: 660, dual_affinity: 81, all: 495, all_affinity: 62 },
  { level: 4, single: 1380, affinity: 199, dual: 920, dual_affinity: 136, all: 690, all_affinity: 104 },
  { level: 5, single: 1800, affinity: 298, dual: 1200, dual_affinity: 204, all: 900, all_affinity: 156 },
  { level: 6, single: 2250, affinity: 416, dual: 1500, dual_affinity: 285, all: 1120, all_affinity: 218 },
  { level: 7, single: 2730, affinity: 559, dual: 1820, dual_affinity: 383, all: 1360, all_affinity: 293 },
  { level: 8, single: 3240, affinity: 731, dual: 2160, dual_affinity: 501, all: 1620, all_affinity: 384 },
  { level: 9, single: 3780, affinity: 936, dual: 2520, dual_affinity: 641, all: 1890, all_affinity: 492 },
  { level: 10, single: 4380, affinity: 1181, dual: 2920, dual_affinity: 809, all: 2190, all_affinity: 621 },
  { level: 11, single: 5040, affinity: 1486, dual: 3360, dual_affinity: 1018, all: 2520, all_affinity: 782 },
  { level: 12, single: 5760, affinity: 1839, dual: 3840, dual_affinity: 1260, all: 2880, all_affinity: 968 },
  { level: 13, single: 6540, affinity: 2244, dual: 4360, dual_affinity: 1537, all: 3270, all_affinity: 1181 },
  { level: 14, single: 7380, affinity: 2705, dual: 4920, dual_affinity: 1853, all: 3690, all_affinity: 1424 },
  { level: 15, single: 8280, affinity: 3228, dual: 5520, dual_affinity: 2211, all: 4140, all_affinity: 1700 },
  { level: 16, single: 9240, affinity: 3816, dual: 6160, dual_affinity: 2614, all: 4620, all_affinity: 2010 },
  { level: 17, single: 10260, affinity: 4474, dual: 6840, dual_affinity: 3065, all: 5130, all_affinity: 2357 },
  { level: 18, single: 11340, affinity: 5211, dual: 7560, dual_affinity: 3570, all: 5670, all_affinity: 2746 },
  { level: 19, single: 12480, affinity: 6029, dual: 8320, dual_affinity: 4130, all: 6240, all_affinity: 3177 },
  { level: 20, single: 13680, affinity: 6938, dual: 9120, dual_affinity: 4753, all: 6840, all_affinity: 3657 },
  { level: 21, single: 14970, affinity: 7938, dual: 9980, dual_affinity: 5441, all: 7480, all_affinity: 4187 },
  { level: 22, single: 16350, affinity: 9048, dual: 10900, dual_affinity: 6203, all: 8170, all_affinity: 4774 },
  { level: 23, single: 17820, affinity: 10268, dual: 11880, dual_affinity: 7041, all: 8910, all_affinity: 5419 },
  { level: 24, single: 19380, affinity: 11608, dual: 12920, dual_affinity: 7960, all: 9690, all_affinity: 6127 },
  { level: 25, single: 21030, affinity: 13068, dual: 14020, dual_affinity: 8960, all: 10510, all_affinity: 6899 },
  { level: 26, single: 22770, affinity: 14658, dual: 15180, dual_affinity: 10050, all: 11380, all_affinity: 7739 },
  { level: 27, single: 24600, affinity: 16378, dual: 16400, dual_affinity: 11230, all: 12300, all_affinity: 8651 },
  { level: 28, single: 26520, affinity: 18238, dual: 17680, dual_affinity: 12510, all: 13260, all_affinity: 9637 },
  { level: 29, single: 28530, affinity: 20248, dual: 19020, dual_affinity: 13890, all: 14260, all_affinity: 10697 },
  { level: 30, single: 30630, affinity: 22418, dual: 20420, dual_affinity: 15370, all: 15310, all_affinity: 11837 },
  { level: 31, single: 32850, affinity: 24748, dual: 21900, dual_affinity: 16960, all: 16420, all_affinity: 13067 },
  { level: 32, single: 35190, affinity: 27228, dual: 23460, dual_affinity: 18660, all: 17590, all_affinity: 14377 },
  { level: 33, single: 37650, affinity: 29868, dual: 25100, dual_affinity: 20470, all: 18820, all_affinity: 15767 },
  { level: 34, single: 40230, affinity: 32658, dual: 26820, dual_affinity: 22380, all: 20110, all_affinity: 17237 },
  { level: 35, single: 42930, affinity: 35618, dual: 28620, dual_affinity: 24400, all: 21460, all_affinity: 18797 },
  { level: 36, single: 45750, affinity: 38738, dual: 30500, dual_affinity: 26540, all: 22870, all_affinity: 20437 },
  { level: 37, single: 48690, affinity: 42018, dual: 32460, dual_affinity: 28790, all: 24340, all_affinity: 22167 },
  { level: 38, single: 51750, affinity: 45468, dual: 34500, dual_affinity: 31150, all: 25870, all_affinity: 23987 },
  { level: 39, single: 54930, affinity: 49088, dual: 36620, dual_affinity: 33630, all: 27460, all_affinity: 25897 },
  { level: 40, single: 58230, affinity: 52878, dual: 38820, dual_affinity: 36230, all: 29110, all_affinity: 27897 },
  { level: 41, single: 61680, affinity: 56838, dual: 41120, dual_affinity: 38940, all: 30840, all_affinity: 29987 },
  { level: 42, single: 65280, affinity: 61018, dual: 43520, dual_affinity: 41800, all: 32640, all_affinity: 32187 },
  { level: 43, single: 69030, affinity: 65408, dual: 46020, dual_affinity: 44810, all: 34510, all_affinity: 34507 },
  { level: 44, single: 72930, affinity: 70018, dual: 48620, dual_affinity: 47970, all: 36460, all_affinity: 36937 },
  { level: 45, single: 76980, affinity: 74848, dual: 51320, dual_affinity: 51280, all: 38490, all_affinity: 39487 },
  { level: 46, single: 81180, affinity: 79898, dual: 54120, dual_affinity: 54740, all: 40590, all_affinity: 42157 },
  { level: 47, single: 85530, affinity: 85178, dual: 57020, dual_affinity: 58360, all: 42760, all_affinity: 44947 },
  { level: 48, single: 90030, affinity: 90688, dual: 60020, dual_affinity: 62130, all: 45010, all_affinity: 47847 },
  { level: 49, single: 94680, affinity: 96428, dual: 63120, dual_affinity: 66060, all: 47340, all_affinity: 50877 },
  { level: 50, single: 99480, affinity: 102408, dual: 66320, dual_affinity: 70150, all: 49740, all_affinity: 54027 },
  { level: 51, single: 104460, affinity: 108618, dual: 69640, dual_affinity: 74410, all: 52230, all_affinity: 57307 },
  { level: 52, single: 109620, affinity: 115108, dual: 73080, dual_affinity: 78860, all: 54810, all_affinity: 60727 },
  { level: 53, single: 114960, affinity: 121888, dual: 76640, dual_affinity: 83500, all: 57480, all_affinity: 64297 },
  { level: 54, single: 120480, affinity: 128948, dual: 80320, dual_affinity: 88340, all: 60240, all_affinity: 68027 },
  { level: 55, single: 126180, affinity: 136298, dual: 84120, dual_affinity: 93380, all: 63090, all_affinity: 71907 },
  { level: 56, single: 132060, affinity: 143938, dual: 88040, dual_affinity: 98620, all: 66030, all_affinity: 75937 },
  { level: 57, single: 138120, affinity: 151878, dual: 92080, dual_affinity: 104060, all: 69060, all_affinity: 80127 },
  { level: 58, single: 144360, affinity: 160118, dual: 96240, dual_affinity: 109700, all: 72180, all_affinity: 84477 },
  { level: 59, single: 150780, affinity: 168668, dual: 100520, dual_affinity: 115550, all: 75390, all_affinity: 88987 },
  { level: 60, single: 157380, affinity: 177518, dual: 104920, dual_affinity: 121610, all: 78690, all_affinity: 93657 },
  { level: 61, single: 164190, affinity: 186678, dual: 109460, dual_affinity: 127890, all: 82090, all_affinity: 98487 },
  { level: 62, single: 171210, affinity: 196198, dual: 114140, dual_affinity: 134410, all: 85600, all_affinity: 103507 },
  { level: 63, single: 178440, affinity: 206078, dual: 118960, dual_affinity: 134410, all: 89220, all_affinity: 108717 },
  { level: 64, single: 185880, affinity: 216318, dual: 123920, dual_affinity: 148200, all: 92940, all_affinity: 114117 },
  { level: 65, single: 193530, affinity: 226928, dual: 129020, dual_affinity: 155470, all: 96760, all_affinity: 119717 },
  { level: 66, single: 201390, affinity: 237908, dual: 134260, dual_affinity: 162990, all: 100690, all_affinity: 125507 },
  { level: 67, single: 209670, affinity: 249268, dual: 139640, dual_affinity: 170770, all: 104730, all_affinity: 131497 },
  { level: 68, single: 217740, affinity: 260998, dual: 145160, dual_affinity: 178810, all: 108870, all_affinity: 137687 },
  { level: 69, single: 226230, affinity: 273118, dual: 150820, dual_affinity: 187110, all: 113110, all_affinity: 144077 },
  { level: 70, single: 234930, affinity: 285628, dual: 156620, dual_affinity: 195680, all: 117460, all_affinity: 150677 },
  { level: 71, single: 243870, affinity: 298528, dual: 162580, dual_affinity: 204520, all: 121930, all_affinity: 157487 },
  { level: 72, single: 253050, affinity: 311868, dual: 168700, dual_affinity: 213660, all: 126520, all_affinity: 164527 },
  { level: 73, single: 262470, affinity: 325648, dual: 174980, dual_affinity: 223100, all: 131230, all_affinity: 171797 },
  { level: 74, single: 272130, affinity: 339878, dual: 181420, dual_affinity: 232850, all: 136060, all_affinity: 179307 },
  { level: 75, single: 282030, affinity: 354568, dual: 188020, dual_affinity: 242910, all: 141010, all_affinity: 187057 },
  { level: 76, single: 292170, affinity: 369718, dual: 194780, dual_affinity: 253290, all: 146080, all_affinity: 195047 },
  { level: 77, single: 302550, affinity: 385328, dual: 201700, dual_affinity: 263990, all: 151270, all_affinity: 203287 },
  { level: 78, single: 313170, affinity: 401408, dual: 208780, dual_affinity: 275010, all: 156580, all_affinity: 211777 },
  { level: 79, single: 324030, affinity: 417958, dual: 216020, dual_affinity: 286350, all: 162010, all_affinity: 220507 },
  { level: 80, single: 335130, affinity: 434988, dual: 223420, dual_affinity: 298020, all: 167560, all_affinity: 229497 },
  { level: 81, single: 346500, affinity: 452508, dual: 231000, dual_affinity: 310020, all: 173250, all_affinity: 238737 },
  { level: 82, single: 358140, affinity: 470558, dual: 238760, dual_affinity: 322390, all: 179070, all_affinity: 238737 },
  { level: 83, single: 370050, affinity: 489148, dual: 246700, dual_affinity: 335130, all: 185020, all_affinity: 248547 },
  { level: 84, single: 382230, affinity: 508288, dual: 254820, dual_affinity: 348240, all: 191000, all_affinity: 248547 },
  { level: 85, single: 394680, affinity: 527978, dual: 263120, dual_affinity: 361730, all: 197320, all_affinity: 259227 },
  { level: 86, single: 407400, affinity: 548328, dual: 271600, dual_affinity: 375600, all: 203800, all_affinity: 259227 },
  { level: 87, single: 420390, affinity: 569338, dual: 280260, dual_affinity: 389850, all: 210190, all_affinity: 270507 },
  { level: 88, single: 433650, affinity: 591008, dual: 289100, dual_affinity: 404490, all: 216820, all_affinity: 270507 },
  { level: 89, single: 447180, affinity: 613338, dual: 298120, dual_affinity: 419520, all: 223590, all_affinity: 282087 },
  { level: 90, single: 460980, affinity: 636328, dual: 307320, dual_affinity: 434950, all: 230490, all_affinity: 293967 },
  { level: 91, single: 475080, affinity: 659978, dual: 316720, dual_affinity: 450780, all: 237520, all_affinity: 306157 },
  { level: 92, single: 489480, affinity: 684288, dual: 326320, dual_affinity: 467050, all: 244740, all_affinity: 306157 },
  { level: 93, single: 504180, affinity: 709258, dual: 336120, dual_affinity: 483760, all: 252060, all_affinity: 320417 },
  { level: 94, single: 519180, affinity: 734888, dual: 346120, dual_affinity: 500910, all: 259590, all_affinity: 320417 },
  { level: 95, single: 534480, affinity: 761178, dual: 356320, dual_affinity: 518970, all: 267240, all_affinity: 334877 },
  { level: 96, single: 550080, affinity: 788128, dual: 366720, dual_affinity: 537480, all: 275040, all_affinity: 334877 },
  { level: 97, single: 565980, affinity: 815738, dual: 377320, dual_affinity: 556440, all: 282990, all_affinity: 350537 },
  { level: 98, single: 582180, affinity: 844008, dual: 388120, dual_affinity: 575850, all: 291060, all_affinity: 366397 },
];

// Off-attribute per-level data (non-cumulative). Missing values are linearly interpolated.
const offSingleKnown: Record<number, number> = {
  1:100,2:210,3:330,4:460,5:600,6:750,7:910,8:1080,9:1260,10:1460,
  11:1680,12:1920,13:2180,14:2460,15:2760,16:3080,17:3420,18:3780,19:4160,20:4560,
  21:4990,22:5450,23:5940,24:6460,25:7010,26:7590,27:8200,28:8840,29:9510,30:10210,
  31:10950,32:11730,33:12550,34:13410,35:14310,36:15250,37:16230,38:17250,39:18310,40:19410,
  41:20560,42:21760,43:23010,44:24310,45:25660,46:27060,47:28510,48:30010,49:31560,50:33160,
  51:34820,52:36540,53:38320,54:40160,55:42060,56:44020,57:46040,58:48120,59:50260,60:52460,
  61:54730,62:57070,63:59480,64:61960,65:64510,66:67130,67:69820,68:72580,69:75410,70:78310,
  71:81290,72:84350,73:87490,74:90710,75:94010,76:97390,77:100850,78:104390,79:108010,80:111710,
  81:115500,82:119380,83:123350,84:127410,85:131560,86:135800,87:140130,88:144550,89:149060,90:153660,
  91:158360,92:163160,93:168060,94:173060,95:178160,96:183360,97:188660,98:194060,99:199560,100:205160,
  101:210910,102:216810,103:222860,104:229060,105:235410,106:241910,107:248560,108:255360,109:262310,110:269410,
  111:276710,112:284210,113:291910,114:299810,115:307910,116:316210
}

const offAffinityKnown: Record<number, number> = {
  1:0,2:20,3:24,4:30,5:37,6:44,7:53,8:64,9:76,10:91,
  11:113,12:131,13:150,14:171,15:194,16:218,17:244,18:273,19:303,20:337,
  21:372,22:412,23:453,24:497,25:542,26:590,27:640,28:692,29:747,30:804,
  31:864,32:921,33:979,34:1030,35:1090,36:1150,37:1210,38:1280,39:1340,40:1400,
  41:1470,42:1540,43:1620,44:1700,45:1790,46:1870,47:1950,48:2040,49:2120,50:2210,
  51:2300,52:2400,53:2510,54:2610,55:2720,56:2830,57:2940,58:3050,59:3160,60:3280,
  61:3390,68:4340,116:17260
}

function interpolate(sortedEntries: Array<[number, number]>, level: number): number {
  // sortedEntries assumed sorted by level asc
  let prev = sortedEntries[0]
  for (let i = 1; i < sortedEntries.length; i++) {
    const cur = sortedEntries[i]
    if (level === cur[0]) return cur[1]
    if (level < cur[0]) {
      const [l0, v0] = prev
      const [l1, v1] = cur
      const t = (level - l0) / (l1 - l0)
      return Math.round(v0 + t * (v1 - v0))
    }
    prev = cur
  }
  return prev[1]
}

export function getOffSingle(level: number): number {
  return offSingleKnown[level] ?? interpolate(Object.entries(offSingleKnown).map((e)=>[+e[0],+e[1]]).sort((a,b)=>a[0]-b[0]), level)
}

export function getOffAffinity(level: number): number {
  const sorted = Object.entries(offAffinityKnown).map((e)=>[+e[0],+e[1]]).sort((a,b)=>a[0]-b[0])
  const known = offAffinityKnown[level]
  if (known !== undefined) return known
  return interpolate(sorted, level)
}